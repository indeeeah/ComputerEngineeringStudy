## 인터럽트
---

## 인터럽트 처리 예
* CPU가 프로그램을 실행하고 있을 때
    + 입출력 하드웨어 등의 장치 이슈 발생
        - 파일 처리가 끝났다는 것을 운영체제에 알려주기
        - 운영체제는 해당 프로세스를 block state에서 실행대기(ready) 상태로 프로세스 상태 변경하기
    + 또는 예외 상황이 발생
        - 0으로 나누는 계산이 발생해서 예외 박ㄹ생을 운영체제에 알려주기
        - 운영체제가 해당 프로세스 실행 중지/에러 표시

---
## 이벤트와 인터럽트
* 인터럽트는 일종의 이벤트로 불림
* 이벤트에 맞게 운영체제가 처리

---
## 주요 인터럽트(interrupt)
1. 계산하는 코드에서 0으로 나누는 코드 실행시(Divide-by-Zero interrupt)

``` C
#include <stdio.h>

int main() {
    printf("Hello world!\n");
    int data;
    int divider = 0;
    data = 1 / divider; // 이 부분에서 인터럽트 발생

    return 0;
}
```

* 위의 코드를 컴파일러 단계에서는 체크가 되지 않는다.
* 그래서 인터럽트를 날려 운영체제가 중지하고 에러메세지까지 보여준다.

2. 타이머 인터럽트
    + 선점형 스케쥴러를 위해 필요
    + 운영체제 <-- 하드웨어로부터 일정 시간마다 타이머 인터럽트를 운영체제에 알려줌 <-- 컴퓨터 하드웨어
    + 100ms 마다 인터럽트가 발생하여 스케쥴러가 다른 프로세스를 수행할 수 있게 한다.
3. 입출력(IO) 인터럽트 - 여러가지
    + 프린터, 키보드, 마우스, 저장매체(SSD 등) 등

## 인터럽트 종류
* 내부 인터럽트
    + 주로 프로그램 내부에서 잘못된 명령 또는 잘못된 데이터 사용시 발생
        - 0으로 나눴을 떄
        - 사용자 모드에서 허용되지 않은 명령 또는 공간 접근시
            * 하나의 프로세스는 대략 4GB를 가지고 있고 사용자모드가 0~3GB, kernal 모드는 3~4GB이다.
            * kernal 모드에서만 접근할 수 있는 공간을 사용자 모드인 상태에서 process가 실행되다가 포인터가 접근한다면 굉장한 예외상황이기 때문에 인터럽트가 발생한다.
        - 계산 결과가 Overflow/Underflow 날 떄
            * int는 32bit이고 unsigned, signed가 있는데 signed는 부호가 있기 때문에 (1bit) 31bit를 표시할 수 있다는 것인데 31bit를 넘어가는 수를 써야할 시에 overflow라고 한다.
            * 또는 -로 표현할 수 있는데 -로 표현할 수 있는 범위 밖으로 넘어갔을 때 underflow라고 한다.
    + 소프트웨어 인터럽트라고도 한다.
* 외부 인터럽트
    + 주로 하드웨어에서 발생되는 이벤트(프로그램 외부)
        - 전원 이상
        - 기계 문제
        - 키보드 등 IO 관련 이벤트
        - Timer 이벤트
    + 하드웨어 인터럽트라고도 한다.
